import{c as f,r as n,j as e,S as k,E as z,a as F,b as G,R as I,G as R,U as V,K as P,d as D,P as H,e as _,f as B}from"./user-BT6ZP2_n.js";import{g as L,a as W,b as q}from"./crypto-CwB3PTAW.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=f("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=f("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=f("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=f("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=f("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=f("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=f("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=f("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=f("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function X({onSuccess:s}){const[d,t]=n.useState(!1),[m,o]=n.useState(""),u=async()=>{t(!0),o("");try{const l=await chrome.runtime.sendMessage({type:"LOGIN"});l!=null&&l.success?s():o((l==null?void 0:l.error)||"Failed to sign in")}catch(l){o("Failed to connect. Please try again."),console.error("Login error:",l)}finally{t(!1)}};return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px] p-6 animate-fade-in",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center shadow-xl shadow-primary-500/30 animate-pulse-glow",children:e.jsx(k,{className:"w-10 h-10 text-white"})})}),e.jsx("h1",{className:"text-2xl font-bold mb-2 bg-gradient-to-r from-primary-400 to-primary-600 bg-clip-text text-transparent",children:"PassCommit"}),e.jsx("p",{className:"text-dark-400 text-center mb-8 max-w-[250px]",children:"Secure password manager with end-to-end encryption"}),m&&e.jsx("div",{className:"w-full mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm text-center animate-slide-up",children:m}),e.jsxs("button",{onClick:u,disabled:d,className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-white text-gray-800 font-medium rounded-lg hover:bg-gray-100 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[d?e.jsx(T,{className:"w-5 h-5 animate-spin"}):e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),d?"Signing in...":"Sign in with Google"]}),e.jsxs("p",{className:"mt-8 text-xs text-dark-500 text-center",children:["Your passwords are encrypted locally.",e.jsx("br",{}),"We never see your master password."]})]})}function M({isSetup:s,onSuccess:d}){const[t,m]=n.useState(""),[o,u]=n.useState(""),[l,r]=n.useState(!1),[i,a]=n.useState(!1),[h,b]=n.useState(""),j=x=>x.length<8?"Password must be at least 8 characters":/[A-Z]/.test(x)?/[a-z]/.test(x)?/[0-9]/.test(x)?null:"Password must contain a number":"Password must contain a lowercase letter":"Password must contain an uppercase letter",N=async x=>{if(x.preventDefault(),b(""),s){const w=j(t);if(w){b(w);return}if(t!==o){b("Passwords do not match");return}}a(!0);try{const w=s?"SET_MASTER_PASSWORD":"UNLOCK_VAULT",y=await chrome.runtime.sendMessage({type:w,payload:{masterPassword:t}});y!=null&&y.success?d():b((y==null?void 0:y.error)||"Invalid password")}catch(w){b("Something went wrong. Please try again."),console.error("Master password error:",w)}finally{a(!1)}};return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px] p-6 animate-fade-in",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-primary-500/20 to-primary-700/20 border border-primary-500/30 flex items-center justify-center",children:s?e.jsx(k,{className:"w-8 h-8 text-primary-400"}):e.jsx(v,{className:"w-8 h-8 text-primary-400"})})}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:s?"Create Master Password":"Unlock Vault"}),e.jsx("p",{className:"text-dark-400 text-sm text-center mb-6 max-w-[280px]",children:s?"This password encrypts your vault. Store it safely - it cannot be recovered.":"Enter your master password to access your passwords"}),h&&e.jsxs("div",{className:"w-full mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2 text-red-400 text-sm animate-slide-up",children:[e.jsx($,{className:"w-4 h-4 flex-shrink-0"}),h]}),e.jsxs("form",{onSubmit:N,className:"w-full space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",placeholder:"Master password",value:t,onChange:x=>m(x.target.value),className:"input pr-10",autoFocus:!0,required:!0}),e.jsx("button",{type:"button",onClick:()=>r(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-dark-400 hover:text-dark-300",children:l?e.jsx(z,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]}),s&&e.jsx("div",{className:"relative",children:e.jsx("input",{type:l?"text":"password",placeholder:"Confirm password",value:o,onChange:x=>u(x.target.value),className:"input pr-10",required:!0})}),s&&e.jsxs("div",{className:"text-xs text-dark-400 space-y-1",children:[e.jsx("p",{className:t.length>=8?"text-green-400":"",children:"• At least 8 characters"}),e.jsx("p",{className:/[A-Z]/.test(t)?"text-green-400":"",children:"• One uppercase letter"}),e.jsx("p",{className:/[a-z]/.test(t)?"text-green-400":"",children:"• One lowercase letter"}),e.jsx("p",{className:/[0-9]/.test(t)?"text-green-400":"",children:"• One number"})]}),e.jsx("button",{type:"submit",disabled:i||!t||s&&!o,className:"btn btn-primary w-full py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsx(T,{className:"w-5 h-5 animate-spin mx-auto"}):s?"Create Master Password":"Unlock"})]}),s&&e.jsx("div",{className:"mt-6 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg text-yellow-400 text-xs text-center",children:"⚠️ If you forget this password, your vault cannot be recovered."})]})}function ee({onSearch:s}){const[d,t]=n.useState(""),m=o=>{const u=o.target.value;t(u),s(u)};return e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),e.jsx("input",{type:"text",placeholder:"Search passwords...",value:d,onChange:m,className:"input pl-10",autoFocus:!0})]})}function se(){const[s,d]=n.useState(""),[t,m]=n.useState(!1),[o,u]=n.useState("strong"),l=[{id:"strong",icon:J,label:"Strong",color:"text-yellow-400"},{id:"memorable",icon:v,label:"Memorable",color:"text-green-400"},{id:"numeric",icon:Q,label:"Numeric",color:"text-blue-400"}],r=a=>{u(a);let h="";switch(a){case"strong":h=L({length:16,uppercase:!0,lowercase:!0,numbers:!0,symbols:!0,excludeAmbiguous:!0});break;case"memorable":h=q(4);break;case"numeric":h=W(12);break;default:h=L({length:16,uppercase:!0,lowercase:!0,numbers:!0,symbols:!0,excludeAmbiguous:!1})}d(h),m(!1)},i=async()=>{s&&(await navigator.clipboard.writeText(s),m(!0),setTimeout(()=>m(!1),2e3))};return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-dark-200",children:"Quick Generator"}),s&&e.jsx("button",{onClick:()=>r(o),className:"p-1.5 rounded hover:bg-dark-600 transition-colors",title:"Regenerate",children:e.jsx(I,{className:"w-4 h-4 text-dark-400"})})]}),e.jsx("div",{className:"flex gap-2 mb-3",children:l.map(a=>{const h=a.icon;return e.jsxs("button",{onClick:()=>r(a.id),className:`flex-1 flex flex-col items-center gap-1 p-2 rounded-lg border transition-all ${o===a.id&&s?"border-primary-500 bg-primary-500/10":"border-dark-600 hover:border-dark-500 hover:bg-dark-700/50"}`,children:[e.jsx(h,{className:`w-4 h-4 ${a.color}`}),e.jsx("span",{className:"text-xs text-dark-300",children:a.label})]},a.id)})}),s&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-dark-800 rounded-lg animate-fade-in",children:[e.jsx("code",{className:"flex-1 font-mono text-sm text-primary-300 break-all",children:s}),e.jsx("button",{onClick:i,className:`p-2 rounded-lg transition-colors ${t?"bg-green-500/20 text-green-400":"hover:bg-dark-600 text-dark-300"}`,title:t?"Copied!":"Copy",children:t?e.jsx(K,{className:"w-4 h-4"}):e.jsx(E,{className:"w-4 h-4"})})]}),!s&&e.jsx("p",{className:"text-center text-sm text-dark-400 py-3",children:"Click a preset to generate a password"})]})}function A({credentials:s,onAutoFill:d,compact:t=!1}){const[m,o]=n.useState(null),u=async(r,i)=>{i.stopPropagation();try{const a=await chrome.runtime.sendMessage({type:"GET_DECRYPTED_PASSWORD",payload:{credentialId:r.id}});a!=null&&a.data&&(await navigator.clipboard.writeText(a.data),o(r.id),setTimeout(()=>o(null),2e3))}catch(a){console.error("Failed to copy password:",a)}},l=r=>`https://www.google.com/s2/favicons?domain=${r}&sz=32`;return e.jsx("div",{className:"space-y-2",children:s.map(r=>e.jsx("div",{className:`card cursor-pointer hover:bg-dark-600/50 transition-all group ${t?"p-3":"p-4"}`,onClick:()=>d(r),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-8 h-8 rounded-lg bg-dark-700 flex items-center justify-center overflow-hidden",children:[e.jsx("img",{src:l(r.domain),alt:"",className:"w-5 h-5",onError:i=>{var a;i.target.style.display="none",(a=i.target.nextElementSibling)==null||a.classList.remove("hidden")}}),e.jsx(R,{className:"w-4 h-4 text-dark-400 hidden"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-dark-100 truncate",children:r.domain}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-dark-400",children:[e.jsx(V,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:r.username})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:i=>u(r,i),className:"p-2 rounded-lg hover:bg-dark-600 transition-colors",title:"Copy password",children:m===r.id?e.jsx("span",{className:"text-xs text-green-400",children:"Copied!"}):e.jsx(E,{className:"w-4 h-4 text-dark-300"})}),e.jsx("button",{onClick:i=>{i.stopPropagation(),d(r)},className:"p-2 rounded-lg hover:bg-primary-500/20 transition-colors",title:"Auto-fill",children:e.jsx(Z,{className:"w-4 h-4 text-primary-400"})})]})]})},r.id))})}function te(){const[s,d]=n.useState(null),[t,m]=n.useState([]),[o,u]=n.useState([]),[l,r]=n.useState(!1),[i,a]=n.useState(!1),[h,b]=n.useState(!0),[j,N]=n.useState("");n.useEffect(()=>{x()},[]);const x=async()=>{try{if(typeof chrome<"u"&&chrome.tabs){const[p]=await chrome.tabs.query({active:!0,currentWindow:!0});if(p!=null&&p.url)try{const g=new URL(p.url);N(g.hostname)}catch{console.warn("Invalid URL in tab:",p.url)}}else N("localhost");const c=await chrome.runtime.sendMessage({type:"GET_AUTH_STATE"});c!=null&&c.data&&(d(c.data.authState),r(c.data.isUnlocked),c.data.credentials&&(m(c.data.credentials),u(c.data.credentials)))}catch(c){console.error("Failed to initialize popup:",c)}finally{b(!1)}},w=c=>{if(!c.trim()){u(t);return}const p=t.filter(g=>g.domain.toLowerCase().includes(c.toLowerCase())||g.username.toLowerCase().includes(c.toLowerCase()));u(p)},y=async c=>{await chrome.runtime.sendMessage({type:"AUTOFILL",payload:{credentialId:c.id}}),window.close()},O=async()=>{await chrome.runtime.sendMessage({type:"LOGOUT"}),d(null),r(!1),m([])},U=async()=>{await chrome.runtime.sendMessage({type:"LOCK_VAULT"}),r(!1)},C=()=>{chrome.runtime.openOptionsPage()};if(h)return e.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center gap-3",children:[e.jsx(k,{className:"w-12 h-12 text-primary-500"}),e.jsx("p",{className:"text-dark-400",children:"Loading..."})]})});if(!(s!=null&&s.isAuthenticated))return e.jsx(X,{onSuccess:x});if(!s.hasMasterPassword)return e.jsx(M,{isSetup:!0,onSuccess:x});if(!l)return e.jsx(M,{isSetup:!1,onSuccess:x});const S=t.filter(c=>{const p=j.replace(/^www\./,""),g=c.domain.replace(/^www\./,"");return g===p||g.endsWith("."+p)||p.endsWith("."+g)});return e.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[e.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-6 h-6 text-primary-500"}),e.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-primary-400 to-primary-600 bg-clip-text text-transparent",children:"PassCommit"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>a(!i),className:"btn-ghost p-2 rounded-lg",title:"Password Generator",children:e.jsx(P,{className:"w-5 h-5"})}),e.jsx("button",{onClick:C,className:"btn-ghost p-2 rounded-lg",title:"Settings",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsx("button",{onClick:U,className:"btn-ghost p-2 rounded-lg",title:"Lock Vault",children:e.jsx(v,{className:"w-5 h-5"})}),e.jsx("button",{onClick:O,className:"btn-ghost p-2 rounded-lg text-red-400 hover:text-red-300",title:"Logout",children:e.jsx(Y,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"p-4",children:e.jsx(ee,{onSearch:w})}),i&&e.jsx("div",{className:"px-4 pb-4 animate-slide-up",children:e.jsx(se,{})}),S.length>0&&e.jsxs("div",{className:"px-4 pb-2",children:[e.jsxs("h2",{className:"text-xs font-semibold text-dark-400 uppercase tracking-wider mb-2",children:["For ",j]}),e.jsx(A,{credentials:S,onAutoFill:y,compact:!0})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-xs font-semibold text-dark-400 uppercase tracking-wider",children:"All Passwords"}),e.jsxs("button",{onClick:C,className:"flex items-center gap-1 text-xs text-primary-400 hover:text-primary-300",children:[e.jsx(H,{className:"w-3 h-3"}),"Add"]})]}),o.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-dark-400",children:[e.jsx(P,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No passwords saved yet"})]}):e.jsx(A,{credentials:o,onAutoFill:y})]}),e.jsx("footer",{className:"p-3 border-t border-dark-700 text-center",children:e.jsxs("p",{className:"text-xs text-dark-500",children:[t.length," passwords saved • End-to-end encrypted"]})})]})}_.createRoot(document.getElementById("root")).render(e.jsx(B.StrictMode,{children:e.jsx(te,{})}));
