import{c as p,r as a,j as e,S as C,K as R,R as J,d as W,b as X,P as Y,G as ee,U as se,E as V,a as F,e as ae,f as te}from"./user-BT6ZP2_n.js";import{g as u,a as re,b as le}from"./crypto-CwB3PTAW.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=p("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=p("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=p("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=p("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function de(){var T,U,M,G;const[n,b]=a.useState(null),[o,j]=a.useState([]),[r,i]=a.useState(!1),[d,m]=a.useState(!0),[l,_]=a.useState("vault"),[N,z]=a.useState(""),[g,y]=a.useState(null),[S,$]=a.useState({}),[v,x]=a.useState(null),[c,P]=a.useState({length:16,uppercase:!0,lowercase:!0,numbers:!0,symbols:!0,excludeAmbiguous:!0}),[h,H]=a.useState(""),[w,q]=a.useState("strong");a.useEffect(()=>{f()},[]);const f=async()=>{try{const s=await chrome.runtime.sendMessage({type:"GET_AUTH_STATE"});s!=null&&s.data&&(b(s.data.authState),i(s.data.isUnlocked),s.data.credentials&&j(s.data.credentials))}catch(s){console.error("Failed to initialize options:",s)}finally{m(!1)}},E=o.filter(s=>s.domain.toLowerCase().includes(N.toLowerCase())||s.username.toLowerCase().includes(N.toLowerCase())),L=async s=>{try{g?await chrome.runtime.sendMessage({type:"UPDATE_CREDENTIAL",payload:{id:g,...s}}):await chrome.runtime.sendMessage({type:"SAVE_CREDENTIAL",payload:s}),await f(),y(null),x(null)}catch(t){console.error("Failed to save credential:",t)}},B=async s=>{if(confirm("Are you sure you want to delete this credential?"))try{await chrome.runtime.sendMessage({type:"DELETE_CREDENTIAL",payload:{id:s}}),await f()}catch(t){console.error("Failed to delete credential:",t)}},A=async()=>{try{const s=await chrome.runtime.sendMessage({type:"EXPORT_VAULT"});if(s!=null&&s.data){const t=new Blob([JSON.stringify(s.data,null,2)],{type:"application/json"}),I=URL.createObjectURL(t),k=document.createElement("a");k.href=I,k.download=`passcommit-export-${new Date().toISOString().split("T")[0]}.json`,k.click(),URL.revokeObjectURL(I)}}catch(s){console.error("Failed to export vault:",s)}},K=()=>{let s="";switch(w){case"strong":s=u(c);break;case"memorable":s=le(4);break;case"numeric":s=re(12);break;case"custom":s=u(c);break}H(s)},Q=async s=>{await navigator.clipboard.writeText(s)},Z=s=>`https://www.google.com/s2/favicons?domain=${s}&sz=32`;return d?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center gap-3",children:[e.jsx(C,{className:"w-12 h-12 text-primary-500"}),e.jsx("p",{className:"text-dark-400",children:"Loading..."})]})}):!(n!=null&&n.isAuthenticated)||!r?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:[e.jsx(C,{className:"w-16 h-16 text-primary-500 mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Vault Locked"}),e.jsx("p",{className:"text-dark-400 mb-6",children:"Please unlock your vault from the extension popup."}),e.jsx("button",{onClick:()=>chrome.action.openPopup(),className:"btn btn-primary",children:"Open Popup"})]}):e.jsxs("div",{className:"min-h-screen",style:{width:"100vw"},children:[e.jsx("header",{className:"glass border-b border-dark-700 sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"w-8 h-8 text-primary-500"}),e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-primary-400 to-primary-600 bg-clip-text text-transparent",children:"PassCommit Settings"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("span",{className:"text-sm text-dark-400",children:(T=n.user)==null?void 0:T.email})})]})}),e.jsx("nav",{className:"border-b border-dark-700",children:e.jsx("div",{className:"max-w-6xl mx-auto px-6",children:e.jsx("div",{className:"flex gap-6",children:[{id:"vault",label:"Password Vault",icon:R},{id:"generator",label:"Generator",icon:J},{id:"settings",label:"Settings",icon:W}].map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>_(s.id),className:`flex items-center gap-2 py-4 border-b-2 transition-colors ${l===s.id?"border-primary-500 text-primary-400":"border-transparent text-dark-400 hover:text-dark-200"}`,children:[e.jsx(t,{className:"w-4 h-4"}),s.label]},s.id)})})})}),e.jsxs("main",{className:"max-w-6xl mx-auto px-6 py-8",children:[l==="vault"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),e.jsx("input",{type:"text",placeholder:"Search passwords...",value:N,onChange:s=>z(s.target.value),className:"input pl-10"})]}),e.jsxs("button",{onClick:()=>x({domain:"",username:"",encryptedPassword:""}),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"Add Password"]}),e.jsxs("button",{onClick:A,className:"btn btn-secondary flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"Export"]})]}),v&&e.jsxs("div",{className:"card mb-6 animate-slide-up",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Add New Password"}),e.jsx(O,{credential:v,onSave:L,onCancel:()=>x(null),onGeneratePassword:()=>{const s=u(c);return x({...v,encryptedPassword:s}),s}})]}),e.jsx("div",{className:"space-y-3",children:E.length===0?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(R,{className:"w-12 h-12 text-dark-500 mx-auto mb-4"}),e.jsx("p",{className:"text-dark-400",children:o.length===0?"No passwords saved yet. Add your first password!":"No passwords match your search."})]}):E.map(s=>e.jsx("div",{className:"card hover:bg-dark-600/30 transition-colors",children:g===s.id?e.jsx(O,{credential:s,onSave:L,onCancel:()=>y(null),onGeneratePassword:()=>u(c)}):e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-dark-700 flex items-center justify-center",children:e.jsx("img",{src:Z(s.domain),alt:"",className:"w-6 h-6",onError:t=>{t.target.style.display="none"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4 text-dark-400"}),e.jsx("span",{className:"font-medium",children:s.domain})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-dark-400",children:[e.jsx(se,{className:"w-3 h-3"}),e.jsx("span",{children:s.username})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"font-mono text-sm bg-dark-800 px-3 py-1 rounded",children:(S[s.id],"••••••••")}),e.jsx("button",{onClick:()=>$(t=>({...t,[s.id]:!t[s.id]})),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors",children:S[s.id]?e.jsx(V,{className:"w-4 h-4 text-dark-400"}):e.jsx(F,{className:"w-4 h-4 text-dark-400"})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>y(s.id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors",title:"Edit",children:e.jsx(ne,{className:"w-4 h-4 text-dark-400"})}),e.jsx("button",{onClick:()=>B(s.id),className:"p-2 hover:bg-red-500/20 rounded-lg transition-colors",title:"Delete",children:e.jsx(ce,{className:"w-4 h-4 text-red-400"})})]})]})},s.id))})]}),l==="generator"&&e.jsx("div",{className:"max-w-2xl animate-fade-in",children:e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Password Generator"}),e.jsx("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[{id:"strong",label:"Strong",desc:"16 chars, all types"},{id:"memorable",label:"Memorable",desc:"4 random words"},{id:"numeric",label:"Numeric",desc:"12 digit PIN"},{id:"custom",label:"Custom",desc:"Your settings"}].map(s=>e.jsxs("button",{onClick:()=>q(s.id),className:`p-4 rounded-xl border text-left transition-all ${w===s.id?"border-primary-500 bg-primary-500/10":"border-dark-600 hover:border-dark-500"}`,children:[e.jsx("div",{className:"font-medium",children:s.label}),e.jsx("div",{className:"text-xs text-dark-400",children:s.desc})]},s.id))}),w==="custom"&&e.jsxs("div",{className:"space-y-4 mb-6 p-4 bg-dark-800 rounded-xl",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Length: ",c.length]}),e.jsx("input",{type:"range",min:"8",max:"64",value:c.length,onChange:s=>P({...c,length:parseInt(s.target.value)}),className:"w-full"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{key:"uppercase",label:"Uppercase (A-Z)"},{key:"lowercase",label:"Lowercase (a-z)"},{key:"numbers",label:"Numbers (0-9)"},{key:"symbols",label:"Symbols (!@#$)"}].map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c[s.key],onChange:t=>P({...c,[s.key]:t.target.checked}),className:"w-4 h-4 rounded border-dark-500 bg-dark-700 text-primary-500 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm",children:s.label})]},s.key))})]}),e.jsx("button",{onClick:K,className:"btn btn-primary w-full py-3 mb-4",children:"Generate Password"}),h&&e.jsxs("div",{className:"p-4 bg-dark-800 rounded-xl animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("code",{className:"flex-1 font-mono text-lg text-primary-300 break-all",children:h}),e.jsx("button",{onClick:()=>Q(h),className:"btn btn-secondary",children:"Copy"})]}),e.jsxs("div",{className:"text-xs text-dark-400",children:["Strength: Strong • ",h.length," characters"]})]})]})}),l==="settings"&&e.jsxs("div",{className:"max-w-2xl animate-fade-in",children:[e.jsxs("div",{className:"card mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Account"}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-dark-800 rounded-xl",children:[((U=n.user)==null?void 0:U.picture)&&e.jsx("img",{src:n.user.picture,alt:"",className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:(M=n.user)==null?void 0:M.name}),e.jsx("div",{className:"text-sm text-dark-400",children:(G=n.user)==null?void 0:G.email})]})]})]}),e.jsxs("div",{className:"card mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Security"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{className:"w-full text-left p-4 bg-dark-800 rounded-xl hover:bg-dark-700 transition-colors",children:[e.jsx("div",{className:"font-medium",children:"Change Master Password"}),e.jsx("div",{className:"text-sm text-dark-400",children:"Update your vault encryption password"})]}),e.jsxs("button",{className:"w-full text-left p-4 bg-dark-800 rounded-xl hover:bg-dark-700 transition-colors",children:[e.jsx("div",{className:"font-medium",children:"Auto-lock Timer"}),e.jsx("div",{className:"text-sm text-dark-400",children:"Lock vault after 5 minutes of inactivity"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Data"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:A,className:"btn btn-secondary flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"Export Vault"]}),e.jsxs("button",{className:"btn btn-secondary flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Import Vault"]})]})]})]})]})]})}function O({credential:n,onSave:b,onCancel:o,onGeneratePassword:j}){const[r,i]=a.useState(n),[d,m]=a.useState(!1);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Website"}),e.jsx("input",{type:"text",placeholder:"example.com",value:r.domain||"",onChange:l=>i({...r,domain:l.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Username / Email"}),e.jsx("input",{type:"text",placeholder:"user@example.com",value:r.username||"",onChange:l=>i({...r,username:l.target.value}),className:"input"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:d?"text":"password",placeholder:"••••••••",value:r.encryptedPassword||"",onChange:l=>i({...r,encryptedPassword:l.target.value}),className:"input pr-10"}),e.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-dark-400",children:d?e.jsx(V,{className:"w-4 h-4"}):e.jsx(F,{className:"w-4 h-4"})})]}),e.jsx("button",{type:"button",onClick:()=>{const l=j();i({...r,encryptedPassword:l}),m(!0)},className:"btn btn-secondary",children:"Generate"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:o,className:"btn btn-ghost",children:"Cancel"}),e.jsx("button",{onClick:()=>b(r),disabled:!r.domain||!r.username||!r.encryptedPassword,className:"btn btn-primary",children:"Save"})]})]})}ae.createRoot(document.getElementById("root")).render(e.jsx(te.StrictMode,{children:e.jsx(de,{})}));
